# Отчёт по выполнению практической работы № 5

### Информация о студенте
* **Студент:** Островский Антон Ильич
* **Группа:** БСБО-09-22
* **Номер по списку:** 20

---

## Тема: Работа с сетью в Android: Библиотеки Retrofit и Picasso

## Цель работы:
*   Изучить принципы сетевого взаимодействия в Android-приложениях.
*   Научиться выполнять сетевые запросы к REST API с помощью библиотеки **Retrofit**.
*   Освоить асинхронную загрузку изображений из интернета с помощью библиотеки **Picasso**.
*   Реализовать обработку полученных данных в формате JSON и их отображение в `RecyclerView`.
*   Интегрировать полученные навыки в основной проект (`HabitTracker`) в виде нового, изолированного функционала.

---

## Ход работы:

В рамках данной практической работы были выполнены три последовательных задания в отдельном модуле `RetrofitApp` для изучения технологий, после чего полученные знания были применены для расширения функциональности основного проекта `HabitTracker`.

### 1. Задание 1 и 2: Изучение Retrofit (GET и PUT запросы)

**Задача:** Создать модуль `RetrofitApp`, который загружает список дел (todos) с `jsonplaceholder.typicode.com`, отображает их и позволяет отправлять запрос на обновление статуса.

**Реализация:**
1.  Был создан новый модуль `RetrofitApp` и добавлены зависимости для `Retrofit` и `Gson`.
2.  В `AndroidManifest.xml` было добавлено разрешение на использование интернета.
3.  Создан POJO-класс `Todo` для соответствия структуре JSON-объекта с сервера.
4.  Создан интерфейс `ApiService`, в котором были описаны два эндпоинта: `GET /todos` для получения списка и `PUT /todos/{id}` для обновления задачи.
5.  Реализован `TodoAdapter` для `RecyclerView`, который отображал название задачи и `CheckBox` для ее статуса. В адаптер был добавлен `listener` для отслеживания нажатий на `CheckBox`.
6.  В `MainActivity` была выполнена конфигурация Retrofit. При запуске экрана отправлялся GET-запрос. При нажатии на `CheckBox` отправлялся PUT-запрос, имитирующий обновление данных на сервере.


<img width="396" height="864" alt="image" src="https://github.com/user-attachments/assets/d0e3a3c6-fec6-4b6a-a842-56744c590c70" />



### 2. Задание 3: Изучение Picasso

**Задача:** Модифицировать предыдущее задание для отображения изображений из интернета.

**Реализация:**
1.  В `RetrofitApp` была добавлена зависимость для `Picasso`.
2.  Логика приложения была переключена с эндпоинта `/todos` на `/photos` сервиса `jsonplaceholder`.
3.  Был создан новый POJO-класс `Photo` со полями `title` и `thumbnailUrl`.
4.  Макет для элемента списка был изменен: `CheckBox` был заменен на `ImageView`.
5.  В `PhotoAdapter` была добавлена логика `Picasso`: `Picasso.get().load(url).into(imageView)`.
6.  В ходе работы возникла проблема с доступом к URL изображений из-за настроек сети эмулятора.


<img width="489" height="867" alt="image" src="https://github.com/user-attachments/assets/31d36c19-89ec-4851-a4b9-089f9ec791db" />


### 3. Контрольное задание: Интеграция в `HabitTracker`

**Задача:** Реализовать в основном проекте `HabitTracker` получение сущностей из сети с помощью Retrofit и отображение изображений.

**Реализация:**
Было принято архитектурное решение не заменять основную логику приложения (работа с локальной базой данных привычек), а добавить новый функционал в виде **отдельного, изолированного экрана "Идеи из сети"**.

1.  **Добавление кнопки:** На главный экран `MainActivity` была добавлена кнопка "Идеи", расположенная между кнопками "Погода" и "Выйти".
2.  **Создание нового экрана:** Была создана новая `NetworkIdeasActivity` со своим макетом, содержащим `RecyclerView` и `ProgressBar`.
3.  **Изоляция сетевой логики:** В модуле `app` был создан новый пакет `network`, содержащий все необходимые для этой функции классы: `IdeaDto` (POJO), `IdeasApiService` (интерфейс Retrofit) и `IdeasAdapter` (адаптер для RecyclerView).
4.  **Реализация загрузки:** В `NetworkIdeasActivity` была реализована логика Retrofit-запроса к `jsonplaceholder.typicode.com/photos`. Для решения проблемы с доступом к URL изображений была применена та же техника подмены URL на надежные.
5.  **Исправление UI:** Была решена проблема наложения `FloatingActionButton` на другие элементы путем переноса иконки добавления (+) в `Toolbar` на главном экране.
6.  **Восстановление функциональности:** Была полностью восстановлена работа функции "Погода", которая была случайно нарушена в ходе предыдущих правок.


<img width="434" height="865" alt="image" src="https://github.com/user-attachments/assets/d542196c-d6f1-40d2-8407-c4dde214fdf2" />


<img width="476" height="870" alt="image" src="https://github.com/user-attachments/assets/e4740238-c1cd-4b54-97cd-6194e8d97544" />


---

## Общие выводы:

В ходе выполнения практической работы были успешно освоены и применены на практике ключевые библиотеки для работы с сетью в Android. Проект `HabitTracker` был успешно расширен новым функционалом без нарушения его основной архитектуры и логики. Все цели, поставленные в практическом задании, были полностью достигнуты.
